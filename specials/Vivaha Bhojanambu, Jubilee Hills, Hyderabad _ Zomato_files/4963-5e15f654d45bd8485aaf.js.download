"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[4963],{efhW:(e,t,n)=>{n.d(t,{Z:()=>_});var o=n("77l8"),r=n("+9dH"),i=n("Vadf"),s=n("q1tI"),a=n("17x9"),l=n.n(a),u=n("lXQd"),m=n("j399"),d=n("AkOy"),c=n("MKeS"),g=n("wcxm"),f=n("HMsx"),v=n("czsM"),w=n("5An4"),C=n("WjMd"),p=n("6qs4"),I=n("OJgl"),T=n("p0ov"),b=n("qVAO"),E=n("P62M"),R=n("qzqA"),h=n("aemk"),L=n("wUh9"),S=(0,c.ZP)({resolved:{},chunkName:function(){return"PhotoViewerWrapper"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e(2618).then(n.bind(n,"8Csd"))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then((function(e){return t.resolved[n]=!0,e}))},requireSync:function e(t){var o=this.resolve(t);return n(o)},resolve:function e(){return"8Csd"}},{fallback:s.createElement(C.Z,{active:!0})}),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.postId,n=e.userProfilePic,a=e.userName,l=e.userReviewsCount,m=e.userFollowersCount,c=e.rating,v=e.urbanspoonStatus,w=e.ratingColor,C=e.reviewId,E=e.reviewTextSm,y=e.negativeReviewTags,_=e.positiveReviewTags,P=e.reviewPhotos,U=e.reviewUrl,k=e.userProfileUrl,A=e.reviewText,q=e.likeCount,M=e.isLikedByUser,F=e.commentCount,Z=e.updateLikeReview,O=e.timestamp,x=e.comments,V=e.addComment,N=e.editComment,z=e.deleteComment,B=e.loadComments,D=e.moreComments,j=e.currentUserPic,H=e.managementComments,X=e.moreManagementComments,K=e.loadManagementComments,W=e.isLoggedIn,Q=e.openLoginForm,G=e.resId,Y=e.isFollowed,$=e.isEditable,J=e.reviewUserId,ee=e.followReviewer,te=e.showSuccessToast,ne=e.showErrorToast,oe=e.isMobile,re=e.positiveTagTitle,ie=e.negativeTagTitle,se=e.externalUrl,ae=e.externalHost,le=e.externalHostText,ue=e.resInfo,me=e.pageName,de=e.localisedStrings,ce=e.newRatingColor,ge=e.cityId,fe=e.currentTab,ve=e.ratingV2,we=e.bgColorV2,Ce=e.showRatingV2,pe=e.ratingV2Text,Ie=e.withAdminAccess,Te=e.showFollowButton,be=e.isIndividalReviewPage,Ee=G||(0,u.default)(ue,"id",0),Re=[],he=(0,s.useState)(""!==E),Le=(0,i.Z)(he,2),Se=Le[0],ye=Le[1],_e=(0,s.useState)(-1),Pe=(0,i.Z)(_e,2),Ue=Pe[0],ke=Pe[1],Ae=(0,s.useState)(!!be),qe=(0,i.Z)(Ae,2),Me=qe[0],Fe=qe[1],Ze=(0,s.useState)(!1),Oe=(0,i.Z)(Ze,2),xe=Oe[0],Ve=Oe[1],Ne=(0,s.useState)(0),ze=(0,i.Z)(Ne,2),Be=ze[0],De=ze[1],je={reviewId:C,isLikedByUser:M,showSuccessToast:te,showErrorToast:ne,updateLikeReview:Z,reviewUrl:U,showCommentsSection:Me,setShowCommentsSection:Fe,localisedStrings:de,cityId:ge,currentTab:fe},He={userName:a,userProfileUrl:k,userProfilePic:n,ratingColor:w,rating:c,userFollowersCount:m,userReviewsCount:l,urbanspoonStatus:v,isFollowed:Y,isEditable:$,reviewId:C,followReviewer:ee,reviewUserId:J,timestamp:O,isLoggedIn:W,openLoginForm:Q,resInfo:ue,pageName:me,postId:t,localisedStrings:de,newRatingColor:ce,ratingV2:ve,bgColorV2:we,showRatingV2:Ce,ratingV2Text:pe,showFollowButton:Te},Xe=Array.isArray(P);Xe&&P.forEach((function(e){return Re.push({src:(0,u.default)(e,"url",""),title:(0,u.default)(e,"uploaderName",""),subtitle:(0,u.default)(e,"timestamp",""),likes:(0,u.default)(e,"likeCount",0),comments:(0,u.default)(e,"commentCount",0),profile:(0,u.default)(e,"uploaderProfilePic",""),profileUrl:(0,u.default)(e,"uploaderProfileUrl",""),photoId:(0,u.default)(e,"photoId",""),liked:!!(0,u.default)(e,"isLiked",0),commentData:(0,u.default)(e,"comments",[])})}));var Ke=Xe?P.slice(0,3):[],We=Xe?P.length-Ke.length:0;return s.createElement(s.Fragment,null,Ue>-1&&s.createElement(p.default,{onClose:function(){ke(-1)},comments:(0,u.default)(Re,"".concat(Ue,".commentData"),[]),photoId:(0,u.default)(Re,"".concat(Ue,".photoId"),""),isLoggedIn:W,openLoginForm:Q,currentUserPic:j}),s.createElement(h.Z,(0,r.Z)({},He,{isMobile:oe})),Se?s.createElement(s.Fragment,null,s.createElement(I.Zh,{positiveTags:_}),s.createElement(T.Lt,{isMobile:oe},s.createElement(T.Zz,{dangerouslySetInnerHTML:{__html:E},isMobile:oe}),s.createElement(T.yL,{onClick:function(){return ye(!1)}},"read more"))):s.createElement(s.Fragment,null,s.createElement(I.$G,{positiveTags:_,negativeTags:y,positiveTagTitle:re,negativeTagTitle:ie}),s.createElement(T.Lt,{dangerouslySetInnerHTML:{__html:A},isMobile:oe})),!!se&&s.createElement(T.RU,{isMobile:oe,href:se,target:"_blank"},(0,d.default)(le)?ae:le),!!Ke.length&&s.createElement(T.Pc,{gap:8},Ke.map((0,b.mG)(We,(function(e){return function(){De(e),Ve(!0)}}),oe))),!!Re.length&&s.createElement(S,{pvProps:{isOpen:xe,handleClose:function(){Ve(!1)},data:Re,currentIndex:Be,onCommentClick:function(e,t){ke(t)}}}),!t&&s.createElement(s.Fragment,null,s.createElement(T.R_,null,s.createElement(g.P,{color:f.default.z500,size:oe?"1.2rem":"1.4rem"},q||0," ",1!==q?(0,u.default)(de,"likes",""):(0,u.default)(de,"like",""),", ",F||0," ",1!==F?(0,u.default)(de,"comments",""):(0,u.default)(de,"comment",""))),s.createElement(T.yY,{isMobile:oe},(0,R.Z)((0,o.Z)((0,o.Z)({},je),{},{isLoggedIn:W,openLoginForm:Q,withAdminAccess:Ie})).map((function(e){return s.createElement(T.aU,{onClick:e.func,isMobile:oe,key:"singlereviewactions-".concat(e.label),withBackground:e.withBackground||!1,isSelected:e.isSelected||!1},e.icon,s.createElement(T.LO,{isMobile:oe},e.label))})))),Me&&s.createElement(L.Z,{reviewId:C,resId:Ee,isLoggedIn:W,openLoginForm:Q,comments:x,managementComments:H,addComment:V,editComment:N,deleteComment:z,loadComments:B,loadManagementComments:K,moreComments:D,moreManagementComments:X,currentUserPic:j,cityId:ge,currentTab:fe}))};y.propTypes={postId:l().number,pageName:l().string.isRequired,userProfilePic:l().string,userProfileUrl:l().string,userName:l().string,userReviewsCount:l().number,userFollowersCount:l().number,rating:l().number,urbanspoonStatus:l().number,ratingColor:l().string,reviewUrl:l().string,negativeReviewTags:l().arrayOf(l().object),positiveReviewTags:l().arrayOf(l().object),reviewId:l().number.isRequired,reviewPhotos:l().arrayOf(l().object),reviewText:l().string,reviewTextSm:l().string,likeCount:l().number,isLikedByUser:l().bool,commentCount:l().number,updateLikeReview:l().func.isRequired,timestamp:l().string.isRequired,comments:l().arrayOf(l().object),addComment:l().func.isRequired,editComment:l().func.isRequired,deleteComment:l().func.isRequired,loadComments:l().func.isRequired,moreComments:l().bool.isRequired,currentUserPic:l().string,managementComments:l().arrayOf(l().object),moreManagementComments:l().bool.isRequired,loadManagementComments:l().func.isRequired,isLoggedIn:l().bool,openLoginForm:l().func,resId:l().number.isRequired,isFollowed:l().bool.isRequired,isEditable:l().bool.isRequired,reviewUserId:l().number.isRequired,followReviewer:l().func.isRequired,showErrorToast:l().func.isRequired,showSuccessToast:l().func.isRequired,isMobile:l().bool,positiveTagTitle:l().string,negativeTagTitle:l().string,externalUrl:l().string,externalHost:l().string,externalHostText:l().string,resInfo:l().objectOf(l().any),localisedStrings:l().objectOf(l().object).isRequired,newRatingColor:l().string,cityId:l().number,currentTab:l().string,ratingV2:l().string,bgColorV2:l().shape({type:l().string,tint:l().string}),showRatingV2:l().bool,ratingV2Text:l().string,withAdminAccess:l().bool,showFollowButton:l().bool,isIndividalReviewPage:l().bool},y.defaultProps={postId:0,userProfilePic:"",userName:"",userReviewsCount:0,userFollowersCount:0,rating:0,urbanspoonStatus:null,ratingColor:v.default.z500,negativeReviewTags:[],positiveReviewTags:[],reviewPhotos:[],reviewText:"",reviewUrl:"",reviewTextSm:"",likeCount:0,isLikedByUser:!1,commentCount:0,comments:[],userProfileUrl:"",currentUserPic:"",managementComments:[],isLoggedIn:!1,openLoginForm:m.default,isMobile:!1,positiveTagTitle:"",negativeTagTitle:"",externalUrl:"",externalHost:"",externalHostText:"",resInfo:{},newRatingColor:w.default,cityId:0,currentTab:"",ratingV2:"-",bgColorV2:{},showRatingV2:!1,ratingV2Text:"",withAdminAccess:!1,showFollowButton:!1,isIndividalReviewPage:!1};const _=(0,s.memo)(y,E.Uh)},qzqA:(e,t,n)=>{n.d(t,{Z:()=>T});var o=n("37Uq"),r=n("q1tI"),i=n("8c1N"),s=n.n(i),a=n("lXQd"),l=n("Xc3V"),u=n("N6Fs"),m=n("UXKm"),d=n("AsQg"),c=n("HMsx"),g=n("wRyO"),f=n("nl1a"),v=n("FSvt"),w=n("D0bL"),C=n("VAjR"),p=function(e,t,n,o,r,i,s,a){return function(){if(r){if((0,v.IY)({data:{review_id:e,type:t?"unlike":"like"},showErrorToast:n,updateLikeReview:o}),a===C.uU){var l=t?w.YI.USER_PROFILE_DINELINE_UNLIKE:w.YI.USER_PROFILE_DINELINE_LIKE;(0,w.cl)(l,{cityId:s,postId:e})}}else i()}},I=function(e){var t=e.withAdminAccess,n=e.localisedStrings,o=e.reviewId,i=e.showSuccessToast;return t?[{icon:r.createElement(f.default,{size:16,color:c.default.z600}),label:(0,a.default)(n,"copy","")||"Copy Review ID",func:function(){return function(e,t){s()(e),t("Review Id successfully copied to clipboard")}(o,i)},withBackground:!1}]:[]};const T=function(e){var t=e.reviewId,n=e.isLikedByUser,i=e.showSuccessToast,f=e.showErrorToast,v=e.updateLikeReview,T=e.reviewUrl,b=e.showCommentsSection,E=e.setShowCommentsSection,R=e.isLoggedIn,h=e.openLoginForm,L=e.localisedStrings,S=e.cityId,y=e.currentTab;return[{icon:n?r.createElement(u.default,{size:16,color:g.default.z500}):r.createElement(l.default,{size:16,color:c.default.z600}),label:(0,a.default)(L,"liked",""),func:p(t,n,f,v,R,h,S,y),withBackground:!1},{icon:r.createElement(m.default,{size:16,color:c.default.z600}),label:(0,a.default)(L,"comment",""),func:function(){return function(e,t){t(!e)}(b,E)},withBackground:!0,isSelected:b},{icon:r.createElement(d.default,{size:16,color:c.default.z600}),label:(0,a.default)(L,"share",""),func:function(){return function(e,t,n,o,r){e&&(s()(e),t("Review link copied to clipboard")),r===C.uU&&(0,w.cl)(w.YI.USER_PROFILE_DINELINE_SHARE,{cityId:n,postId:o})}(T,i,S,t,y)},withBackground:!1}].concat((0,o.Z)(I(e)))}},wUh9:(e,t,n)=>{n.d(t,{Z:()=>p});var o=n("+9dH"),r=n("Vadf"),i=n("q1tI"),s=n("17x9"),a=n.n(s),l=n("j399"),u=n("wRyO"),m=n("ieZA"),d=n("WTSG"),c=n("ptaH"),g=n("en2A"),f=n("p0ov"),v=n("gqXX"),w=n("FSvt"),C=function(e){var t=e.resId,n=e.reviewId,s=e.isLoggedIn,a=e.openLoginForm,l=e.comments,C=e.managementComments,p=e.addComment,I=e.editComment,T=e.deleteComment,b=e.loadComments,E=e.loadManagementComments,R=e.moreComments,h=e.moreManagementComments,L=e.currentUserPic,S=e.cityId,y=e.currentTab,_=(0,i.useState)(1),P=(0,r.Z)(_,2),U=P[0],k=P[1],A=(0,i.useState)(1),q=(0,r.Z)(A,2),M=q[0],F=q[1],Z=(0,i.useState)(!1),O=(0,r.Z)(Z,2),x=O[0],V=O[1],N=(0,i.useState)(!1),z=(0,r.Z)(N,2),B=z[0],D=z[1],j=(0,i.useState)(!1),H=(0,r.Z)(j,2),X=H[0],K=H[1],W=Array.isArray(l)&&l.map((function(e){return i.createElement(c.Z,(0,o.Z)({},e,{key:e.commentId,entityId:n,editComment:I,deleteComment:T,setCommentsLoading:V,source:g.S3}))})),Q=Array.isArray(C)&&C.map((function(e){return i.createElement(c.Z,(0,o.Z)({},e,{isManagement:!0,key:e.commentId,source:g.S3}))}));return i.createElement(i.Fragment,null,i.createElement(d.Z,{reviewId:n,postComment:w.w,addComment:p,setLoading:V,currentUserPic:L,isLoggedIn:s,openLoginForm:a,source:g.S3,cityId:S,currentTab:y}),i.createElement(f.GX,null,x&&i.createElement(f.RV,{size:"medium",color:u.default.z500}),Q,h&&!X&&i.createElement(f.Yt,{onClick:function(){K(!0),(0,w.$D)({data:{review_id:n,res_id:t,page:M},loadManagementComments:E,setManagementCommentsPage:F}).then((function(){K(!1)}))}},g.OF),!!l.length&&!!C.length&&i.createElement(v.n4,null),W,R&&!B&&i.createElement(f.Yt,{onClick:function(){D(!0),(0,w.dQ)({data:{review_id:n,page:U},loadComments:b,setCommentsPage:k}).then((function(){D(!1)}))}},g.vI),B&&i.createElement(m.default,{size:"medium",color:u.default.z500})))};C.propTypes={reviewId:a().number.isRequired,resId:a().number.isRequired,comments:a().arrayOf(a().object),addComment:a().func.isRequired,editComment:a().func.isRequired,deleteComment:a().func.isRequired,loadComments:a().func.isRequired,moreComments:a().bool.isRequired,currentUserPic:a().string,managementComments:a().arrayOf(a().object),moreManagementComments:a().bool.isRequired,loadManagementComments:a().func.isRequired,isLoggedIn:a().bool,openLoginForm:a().func,cityId:a().number,currentTab:a().string},C.defaultProps={comments:[],currentUserPic:"",managementComments:[],isLoggedIn:!1,openLoginForm:l.default,cityId:0,currentTab:""};const p=C},gKev:(e,t,n)=>{n.d(t,{Z:()=>f});var o=n("TRpf"),r=n("lXQd"),i=n("P62M"),s=n("efhW"),a=n("Ujvf"),l=n("ScDn"),u=n("qVg0"),m=n("v4uT"),d=n("1QBQ"),c=n("VAjR"),g=function(e){var t,n;return(null!==(t=null==e||null===(n=e.pages)||void 0===n||null===(n=n.current)||void 0===n?void 0:n.name)&&void 0!==t?t:"")===c.xp};const f=(0,o.$j)((function(e,t){var n=(0,u.zA)(e,t),o=n.rating,s=n.ratingColor,a=n.newRatingColor,l=(0,r.default)(e,"langKeys",{}),c={reviews:(0,r.default)(l,"REVIEWS_TEXT",""),followers:(0,r.default)(l,"FOLLOWERS_TEXT",""),following:(0,r.default)(l,"FILTER_FOLLOWING",""),follow:(0,r.default)(l,"FOLLOW_TEXT"),like:(0,r.default)(l,"LIKE_TEXT",""),likes:(0,r.default)(l,"LIKES_TEXT",""),comment:(0,r.default)(l,"COMMENT_TEXT",""),comments:(0,r.default)(l,"COMMENTS_TEXT",""),share:(0,r.default)(l,"SHARE_TITLE",""),liked:(0,r.default)(l,"LIKED_TEXT",""),copy:(0,r.default)(l,"COPY_REVIEW_ID","")};return{pageName:(0,r.default)(e,"pages.current.name",""),isLoggedIn:(0,i.Pc)(e),withAdminAccess:(0,d.Z)(e,"copy_review_id"),resId:(0,r.default)(e,"pages.current.resId",0),isMobile:!!(0,r.default)(e,"pages.current.isMobile",!1),positiveTagTitle:(0,r.default)(e,"langKeys.POSITIVE_TAGS",""),negativeTagTitle:(0,r.default)(e,"langKeys.NEGATIVE_TAGS",""),currentUserPic:(0,r.default)(e,"user.basic_info.profile_picture",""),rating:o,ratingColor:s,newRatingColor:a,localisedStrings:c,cityId:(0,r.default)(e,"location.currentLocation.cityId",0),currentTab:(0,r.default)(e,"pages.current.subType",""),showRatingV2:(0,m.Z)(e),isIndividalReviewPage:g(e)}}),(function(e){return{updateLikeReview:function(t){e((0,l.fK)(t.review_id))},addComment:function(t,n,o){e((0,l.kN)(t,n,o))},editComment:function(t,n,o){e((0,l.RM)(t,n,o))},deleteComment:function(t,n){e((0,l.xf)(t,n))},loadComments:function(t,n,o,r){e((0,l.dQ)(t,n,o,r))},openLoginForm:function(){return e((0,a.WG)())},loadManagementComments:function(t,n,o,r){e((0,l.$D)(t,n,o,r))},followReviewer:function(t){return e((0,l.ui)(t))},showErrorToast:function(t){return e((0,a.u1)(t))},showSuccessToast:function(t){return e((0,a.SC)(t))}}}))(s.Z)},"1QBQ":(e,t,n)=>{n.d(t,{Z:()=>i});var o=n("bBS5");const r=function(e){var t,n,r;if(!(0,o.Z)(e))return!1;var i=null!==(t=null==e?void 0:e.user)&&void 0!==t?t:{};return null!==(n=null==i||null===(r=i.admin_access)||void 0===r?void 0:r.isTurnedOn)&&void 0!==n&&n};const i=function(e,t){var n,i,s,a,l=r(e);if((0,o.Z)(e)&&!l)return!1;var u=null!==(n=null==e?void 0:e.user)&&void 0!==n?n:{};return null!==(a=(null!==(i=null==u||null===(s=u.admin_access)||void 0===s?void 0:s.permissions)&&void 0!==i?i:{})[t])&&void 0!==a&&a}},bBS5:(e,t,n)=>{n.d(t,{Z:()=>o});const o=function(e){var t,n,o,r;if(null!==(t=null==e||null===(n=e.pages)||void 0===n||null===(n=n.current)||void 0===n?void 0:n.isMobile)&&void 0!==t&&t)return!1;var i=null!==(o=null==e?void 0:e.user)&&void 0!==o?o:{};return null!==(r=null==i?void 0:i.is_admin_user)&&void 0!==r&&r}}}]);